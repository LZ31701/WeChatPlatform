<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.4 (452971)"/><meta name="altitude" content="31.26432991027832"/><meta name="author" content="wenhulove333@163.com"/><meta name="created" content="2016-01-05 23:00:13 +0000"/><meta name="latitude" content="30.17281343428535"/><meta name="longitude" content="120.1426623906304"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2016-01-05 23:01:50 +0000"/><title>Building nginx from Sources   http://nginx.org/</title></head><body>
<div>
<p style="text-align: justify; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">The build is configured using the <code>configure</code> command. It defines various aspects of the system, including the methods nginx is allowed to use for connection processing. At the end it creates a<code>Makefile</code>. The <code>configure</code> command supports the following parameters:</p>
<ul style="padding: 0px 0.5em; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--prefix=</code><i>path</i> — defines a directory that will keep server files. This same directory will also be used for all relative paths set by <code>configure</code> (except for paths to libraries sources) and in the <code>nginx.conf</code>configuration file. It is set to the <code>/usr/local/nginx</code> directory by default.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--sbin-path=</code><i>path</i> — sets the name of an nginx executable file. This name is used only during installation. By default the file is named <code><code><i>prefix</i></code>/sbin/nginx</code>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--conf-path=</code><i>path</i> — sets the name of an <code>nginx.conf</code> configuration file. If needs be, nginx can always be started with a different configuration file, by specifying it in the command-line parameter <code>-c </code><i>file</i>. By default the file is named <code><code><i>prefix</i></code>/conf/nginx.conf</code>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--pid-path=</code><i>path</i> — sets the name of an nginx.pid file that will store the process ID of the main process. After installation, the file name can always be changed in the <code>nginx.conf</code> configuration file using the <a href="http://nginx.org/en/docs/ngx_core_module.html#pid">pid</a> directive. By default the file is named <code><code><i>prefix</i></code>/logs/nginx.pid</code>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--error-log-path=</code><i>path</i> — sets the name of the primary error, warnings, and diagnostic file. After installation, the file name can always be changed in the <code>nginx.conf</code> configuration file using the<a href="http://nginx.org/en/docs/ngx_core_module.html#error_log">error_log</a> directive. By default the file is named <code><code><i>prefix</i></code>/logs/error.log</code>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--http-log-path=</code><i>path</i> — sets the name of the primary request log file of the HTTP server. After installation, the file name can always be changed in the <code>nginx.conf</code> configuration file using the<a href="http://nginx.org/en/docs/http/ngx_http_log_module.html#access_log">access_log</a> directive. By default the file is named <code><code><i>prefix</i></code>/logs/access.log</code>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--user=</code><i>name</i> — sets the name of an unprivileged user whose credentials will be used by worker processes. After installation, the name can always be changed in the <code>nginx.conf</code> configuration file using the <a href="http://nginx.org/en/docs/ngx_core_module.html#user">user</a> directive. The default user name is nobody.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--group=</code><i>name</i> — sets the name of a group whose credentials will be used by worker processes. After installation, the name can always be changed in the <code>nginx.conf</code> configuration file using the<a href="http://nginx.org/en/docs/ngx_core_module.html#user">user</a> directive. By default, a group name is set to the name of an unprivileged user.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-select_module</code><br/>
<code>--without-select_module</code> — enables or disables building a module that allows the server to work with the <code>select()</code> method. This module is built automatically if the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-poll_module</code><br/>
<code>--without-poll_module</code> — enables or disables building a module that allows the server to work with the <code>poll()</code> method. This module is built automatically if the platform does not appear to support more appropriate methods such as kqueue, epoll, or /dev/poll.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--without-http_gzip_module</code> — disables building a module that <a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html">compresses responses</a> of an HTTP server. The zlib library is required to build and run this module.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--without-http_rewrite_module</code> — disables building a module that allows an HTTP server to <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html">redirect requests and change URI of requests</a>. The PCRE library is required to build and run this module.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--without-http_proxy_module</code> — disables building an HTTP server <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html">proxying module</a>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-http_ssl_module</code> — enables building a module that adds the <a href="http://nginx.org/en/docs/http/ngx_http_ssl_module.html">HTTPS protocol support</a> to an HTTP server. This module is not built by default. The OpenSSL library is required to build and run this module.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-pcre=</code><i>path</i> — sets the path to the sources of the PCRE library. The library distribution (version 4.4 — 8.32) needs to be downloaded from the <a href="http://www.pcre.org/">PCRE</a> site and extracted. The rest is done by nginx’s <code>./configure</code> and <code>make</code>. The library is required for regular expressions support in the <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location">location</a>directive and for the <a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html">ngx_http_rewrite_module</a> module.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-pcre-jit</code> — builds the PCRE library with “just-in-time compilation” support (1.1.12, the<a href="http://nginx.org/en/docs/ngx_core_module.html#pcre_jit">pcre_jit</a> directive).</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-zlib=</code><i>path</i> — sets the path to the sources of the zlib library. The library distribution (version 1.1.3 — 1.2.7) needs to be downloaded from the <a href="http://zlib.net/">zlib</a> site and extracted. The rest is done by nginx’s <code>./configure</code> and <code>make</code>. The library is required for the <a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html">ngx_http_gzip_module</a> module.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-cc-opt=</code><i>parameters</i> — sets additional parameters that will be added to the CFLAGS variable. When using the system PCRE library under FreeBSD, <code>--with-cc-opt="-I /usr/local/include"</code> should be specified. If the number of files supported by <code>select()</code> needs to be increased it can also be specified here such as this: <code>--with-cc-opt="-D FD_SETSIZE=2048"</code>.</p>
</li>
<li style="text-align: justify; padding: 0px 0px 0px 1px;">
<p style="text-align: justify;"><code>--with-ld-opt=</code><i>parameters</i> — sets additional parameters that will be used during linking. When using the system PCRE library under FreeBSD, <code>--with-ld-opt="-L /usr/local/lib"</code> should be specified.</p>
</li>
</ul>
<p style="text-align: justify; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/>
<p style="text-align: justify; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Example of parameters usage (all of this needs to be typed in one line):</p>
<blockquote style="padding: 0.5em; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(187, 187, 187); color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">
<pre style="padding: 0px;">
./configure
    --sbin-path=/usr/local/nginx/nginx
    --conf-path=/usr/local/nginx/nginx.conf
    --pid-path=/usr/local/nginx/nginx.pid
    --with-http_ssl_module
    --with-pcre=../pcre-4.4
    --with-zlib=../zlib-1.1.3

</pre></blockquote>
<p style="text-align: justify; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"/>
</div>
<div><br/></div>
<div>
<div style="text-align: justify; color: rgb(0, 0, 0); font-family: sans-serif; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">
<div>After configuration, nginx is compiled and installed using <code>make</code>.</div>
</div>
</div>
</body></html>